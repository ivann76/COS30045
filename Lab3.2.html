<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="description" content="Data Visualisation" />
    <meta name="keywords" content="HTML, CSS, D3" />
    <meta name="author" content="Ivan" />

    <title>Task 3.2 D3 Adding Axis to your Charts</title>

    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>

    <h1>The D3 Journey starts here...</h1>
    <p>The following is a modified version of the original Lab3-2 with axis labels.</p>

    <!-- Define the SVG canvas -->
    <svg width="600" height="400"></svg>

    <script>
        // Define the dataset
        var dataset = [
            [2, 8],
            [3, 5],
            [5, 17],
            [6, 6],
            [6, 12],
            [7, 20],
            [8, 22],
            [10, 11],
            [5, 12],
            [6, 16]
        ];

        // Set canvas dimensions and padding
        var svgWidth = 600;
        var svgHeight = 400;
        var padding = 40;

        // Create scales for x and y
        var xScale = d3.scaleLinear()
            .domain([0, d3.max(dataset, function(d) { return d[0]; })])
            .range([padding, svgWidth - padding]);

        var yScale = d3.scaleLinear()
            .domain([0, d3.max(dataset, function(d) { return d[1]; })])
            .range([svgHeight - padding, padding]); // Reversed so low values are at the bottom

        // Select the SVG element
        var svg = d3.select("svg");

        // Create circles for each data point
        svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr("cx", function(d) {
                return xScale(d[0]); // Apply xScale for the X coordinate
            })
            .attr("cy", function(d) {
                return yScale(d[1]); // Apply yScale for the Y coordinate
            })
            .attr("r", 5)
            .attr("fill", "slategrey");

        // Add text labels for each data point
        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .attr("x", function(d) {
                return xScale(d[0]) + 10; // Position text slightly to the right
            })
            .attr("y", function(d) {
                return yScale(d[1]);
            })
            .text(function(d) {
                return d[0] + "," + d[1];
            })
            .attr("font-family", "Arial")
            .attr("font-size", "12px")
            .attr("fill", "green");

        // Create the x-axis
        var xAxis = d3.axisBottom(xScale);
        svg.append("g")
            .attr("transform", "translate(0," + (svgHeight - padding) + ")")
            .call(xAxis);

        // Create the y-axis
        var yAxis = d3.axisLeft(yScale);
        svg.append("g")
            .attr("transform", "translate(" + padding + ",0)")
            .call(yAxis);

        // Add X-axis label
        svg.append("text")
            .attr("x", svgWidth / 2)
            .attr("y", svgHeight - 10)
            .attr("text-anchor", "middle")
            .attr("font-size", "14px")
            .attr("fill", "black")
            .text("Tree Age (year)");

        // Add Y-axis label
        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("x", -svgHeight / 2)
            .attr("y", 15)
            .attr("text-anchor", "middle")
            .attr("font-size", "14px")
            .attr("fill", "black")
            .text("Tree Height (m)");

    </script>

    <footer style="color:grey">COS30045 Data Visualisation<br>
        Joe Bloggs
    </footer>

</body>

</html>
